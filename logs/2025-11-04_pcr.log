2025-11-04 09:40:47.115 | INFO | 使用 wiki 中的静态图片进行测试

2025-11-04 09:40:47.125 | INFO | 成功加载图片: wiki/滚动条顶部边界.png
2025-11-04 09:40:47.125 | INFO | 图片尺寸: 12x310 (宽x高)
2025-11-04 09:40:47.129 | INFO | 完整截图已保存: debug_滚动条顶部边界_full.png
2025-11-04 11:03:16.890 | INFO | 使用 wiki 中的静态图片进行测试

2025-11-04 11:03:16.901 | INFO | 成功加载图片: wiki/滚动条顶部边界.png
2025-11-04 11:03:16.901 | INFO | 图片尺寸: 12x310 (宽x高)
2025-11-04 11:03:16.902 | INFO | 检测到滚动条区域图 (12x310)
2025-11-04 11:03:16.903 | INFO | 滚动条区域已保存: debug_滚动条顶部边界_scroll_area.png
2025-11-04 11:03:16.908 | INFO | 滚动条配置:
2025-11-04 11:03:16.908 | INFO |   区域 (area): (0, 0, 12, 310)
2025-11-04 11:03:16.909 | INFO |   目标颜色 (color): (102, 149, 224)
2025-11-04 11:03:16.910 | INFO |   轨道总长度 (total): 310 像素
2025-11-04 11:03:16.910 | INFO |   滑块长度 (length): 68 像素
2025-11-04 11:03:16.911 | INFO | 
颜色匹配结果:
2025-11-04 11:03:16.911 | INFO |   匹配的行数: 68 / 310
2025-11-04 11:03:16.912 | INFO |   匹配率: 21.9%
2025-11-04 11:03:16.913 | INFO |   匹配行索引范围: 95 ~ 162
2025-11-04 11:03:16.913 | INFO |   第一个匹配行距离顶部: 95 像素
2025-11-04 11:03:16.914 | INFO |   最后一个匹配行距离顶部: 162 像素
2025-11-04 11:03:16.914 | INFO |   匹配行中点: 128.50 像素
2025-11-04 11:03:16.915 | INFO | 位置计算公式:
2025-11-04 11:03:16.915 | INFO |   position = (middle - length/2) / (total - length)
2025-11-04 11:03:16.916 | INFO |   middle = 128.50
2025-11-04 11:03:16.916 | INFO |   length = 68
2025-11-04 11:03:16.917 | INFO |   length/2 = 34.00
2025-11-04 11:03:16.917 | INFO |   total = 310
2025-11-04 11:03:16.918 | INFO |   numerator = middle - length/2 = 128.50 - 34.00 = 94.50
2025-11-04 11:03:16.918 | INFO |   denominator = total - length = 310 - 68 = 242.00
2025-11-04 11:03:16.919 | INFO |   raw_position = 94.50 / 242.00 = 0.3905
2025-11-04 11:03:16.919 | INFO |   final_position (clamped) = 0.3905
2025-11-04 11:03:16.920 | INFO | CHARACTER_SCROLL = 0.39 (128.5-34.0)/(310-68)
2025-11-04 11:03:16.920 | INFO | 
Scroll.cal_position() 返回: 0.3905
2025-11-04 11:03:16.921 | INFO | 底部边界阈值 (edge_threshold): 0.05
2025-11-04 11:03:16.922 | INFO | 顶部边界阈值 (edge_threshold_top): 0.1
2025-11-04 11:03:16.922 | INFO | 顶部判断条件: position < 0.1
2025-11-04 11:03:16.923 | INFO | 底部判断条件: position > 0.95 (即 position > 0.95)
2025-11-04 11:03:16.923 | INFO | CHARACTER_SCROLL = 0.39 (128.5-34.0)/(310-68)
2025-11-04 11:03:16.924 | INFO | CHARACTER_SCROLL = 0.39 (128.5-34.0)/(310-68)
2025-11-04 11:03:16.924 | INFO | 
at_top() 结果: False
2025-11-04 11:03:16.925 | INFO |   当前 position = 0.3905
2025-11-04 11:03:16.925 | INFO |   0.3905 < 0.1? False
2025-11-04 11:03:16.926 | WARNING |   ✗ 顶部检测失败
2025-11-04 11:03:16.926 | WARNING |     虽然滚动条在视觉上已经到达顶部，
2025-11-04 11:03:16.927 | WARNING |     但计算的 position = 0.3905 不满足 < 0.1
2025-11-04 11:03:16.927 | WARNING |     差距: 0.2905
2025-11-04 11:03:16.928 | WARNING | 
  建议调整:
2025-11-04 11:03:16.928 | WARNING |     将 edge_threshold_top 从 0.1 调整到 0.410 或更大
2025-11-04 11:03:16.929 | INFO | 
at_bottom() 结果: False
2025-11-04 11:03:16.944 | INFO | 可视化图像已保存: debug_滚动条顶部边界_visualization.png
2025-11-04 11:03:16.945 | INFO |   绿线: 匹配到的滑块像素行
2025-11-04 11:03:16.945 | INFO |   蓝线: 滑块中点
2025-11-04 11:03:16.946 | INFO |   黄线: 滑块上下边界
2025-11-04 11:03:16.947 | INFO | 成功加载图片: wiki/滚动条顶部边界2.png
2025-11-04 11:03:16.947 | INFO | 图片尺寸: 12x310 (宽x高)
2025-11-04 11:03:16.948 | INFO | 检测到滚动条区域图 (12x310)
2025-11-04 11:03:16.948 | INFO | 滚动条区域已保存: debug_滚动条顶部边界2_scroll_area.png
2025-11-04 11:03:16.949 | INFO | 滚动条配置:
2025-11-04 11:03:16.950 | INFO |   区域 (area): (0, 0, 12, 310)
2025-11-04 11:03:16.950 | INFO |   目标颜色 (color): (102, 149, 224)
2025-11-04 11:03:16.951 | INFO |   轨道总长度 (total): 310 像素
2025-11-04 11:03:16.951 | INFO |   滑块长度 (length): 61 像素
2025-11-04 11:03:16.952 | INFO | 
颜色匹配结果:
2025-11-04 11:03:16.952 | INFO |   匹配的行数: 61 / 310
2025-11-04 11:03:16.952 | INFO |   匹配率: 19.7%
2025-11-04 11:03:16.953 | INFO |   匹配行索引范围: 92 ~ 152
2025-11-04 11:03:16.953 | INFO |   第一个匹配行距离顶部: 92 像素
2025-11-04 11:03:16.954 | INFO |   最后一个匹配行距离顶部: 152 像素
2025-11-04 11:03:16.954 | INFO |   匹配行中点: 122.00 像素
2025-11-04 11:03:16.955 | INFO | 位置计算公式:
2025-11-04 11:03:16.955 | INFO |   position = (middle - length/2) / (total - length)
2025-11-04 11:03:16.956 | INFO |   middle = 122.00
2025-11-04 11:03:16.956 | INFO |   length = 61
2025-11-04 11:03:16.957 | INFO |   length/2 = 30.50
2025-11-04 11:03:16.957 | INFO |   total = 310
2025-11-04 11:03:16.958 | INFO |   numerator = middle - length/2 = 122.00 - 30.50 = 91.50
2025-11-04 11:03:16.958 | INFO |   denominator = total - length = 310 - 61 = 249.00
2025-11-04 11:03:16.959 | INFO |   raw_position = 91.50 / 249.00 = 0.3675
2025-11-04 11:03:16.959 | INFO |   final_position (clamped) = 0.3675
2025-11-04 11:03:16.960 | INFO | CHARACTER_SCROLL = 0.37 (122.0-30.5)/(310-61)
2025-11-04 11:03:16.960 | INFO | 
Scroll.cal_position() 返回: 0.3675
2025-11-04 11:03:16.961 | INFO | 底部边界阈值 (edge_threshold): 0.05
2025-11-04 11:03:16.961 | INFO | 顶部边界阈值 (edge_threshold_top): 0.1
2025-11-04 11:03:16.962 | INFO | 顶部判断条件: position < 0.1
2025-11-04 11:03:16.962 | INFO | 底部判断条件: position > 0.95 (即 position > 0.95)
2025-11-04 11:03:16.963 | INFO | CHARACTER_SCROLL = 0.37 (122.0-30.5)/(310-61)
2025-11-04 11:03:16.963 | INFO | CHARACTER_SCROLL = 0.37 (122.0-30.5)/(310-61)
2025-11-04 11:03:16.964 | INFO | 
at_top() 结果: False
2025-11-04 11:03:16.964 | INFO |   当前 position = 0.3675
2025-11-04 11:03:16.965 | INFO |   0.3675 < 0.1? False
2025-11-04 11:03:16.965 | WARNING |   ✗ 顶部检测失败
2025-11-04 11:03:16.966 | WARNING |     虽然滚动条在视觉上已经到达顶部，
2025-11-04 11:03:16.966 | WARNING |     但计算的 position = 0.3675 不满足 < 0.1
2025-11-04 11:03:16.967 | WARNING |     差距: 0.2675
2025-11-04 11:03:16.967 | WARNING | 
  建议调整:
2025-11-04 11:03:16.968 | WARNING |     将 edge_threshold_top 从 0.1 调整到 0.387 或更大
2025-11-04 11:03:16.969 | INFO | 
at_bottom() 结果: False
2025-11-04 11:03:16.970 | INFO | 可视化图像已保存: debug_滚动条顶部边界2_visualization.png
2025-11-04 11:03:16.970 | INFO |   绿线: 匹配到的滑块像素行
2025-11-04 11:03:16.970 | INFO |   蓝线: 滑块中点
2025-11-04 11:03:16.971 | INFO |   黄线: 滑块上下边界
2025-11-04 11:03:16.972 | INFO | 成功加载图片: wiki/滚动条顶部边界3.png
2025-11-04 11:03:16.972 | INFO | 图片尺寸: 12x310 (宽x高)
2025-11-04 11:03:16.973 | INFO | 检测到滚动条区域图 (12x310)
2025-11-04 11:03:16.974 | INFO | 滚动条区域已保存: debug_滚动条顶部边界3_scroll_area.png
2025-11-04 11:03:16.975 | INFO | 滚动条配置:
2025-11-04 11:03:16.975 | INFO |   区域 (area): (0, 0, 12, 310)
2025-11-04 11:03:16.975 | INFO |   目标颜色 (color): (102, 149, 224)
2025-11-04 11:03:16.976 | INFO |   轨道总长度 (total): 310 像素
2025-11-04 11:03:16.976 | INFO |   滑块长度 (length): 22 像素
2025-11-04 11:03:16.977 | INFO | 
颜色匹配结果:
2025-11-04 11:03:16.977 | INFO |   匹配的行数: 22 / 310
2025-11-04 11:03:16.978 | INFO |   匹配率: 7.1%
2025-11-04 11:03:16.978 | INFO |   匹配行索引范围: 81 ~ 102
2025-11-04 11:03:16.979 | INFO |   第一个匹配行距离顶部: 81 像素
2025-11-04 11:03:16.979 | INFO |   最后一个匹配行距离顶部: 102 像素
2025-11-04 11:03:16.980 | INFO |   匹配行中点: 91.50 像素
2025-11-04 11:03:16.980 | INFO | 位置计算公式:
2025-11-04 11:03:16.981 | INFO |   position = (middle - length/2) / (total - length)
2025-11-04 11:03:16.981 | INFO |   middle = 91.50
2025-11-04 11:03:16.982 | INFO |   length = 22
2025-11-04 11:03:16.982 | INFO |   length/2 = 11.00
2025-11-04 11:03:16.982 | INFO |   total = 310
2025-11-04 11:03:16.983 | INFO |   numerator = middle - length/2 = 91.50 - 11.00 = 80.50
2025-11-04 11:03:16.983 | INFO |   denominator = total - length = 310 - 22 = 288.00
2025-11-04 11:03:16.984 | INFO |   raw_position = 80.50 / 288.00 = 0.2795
2025-11-04 11:03:16.984 | INFO |   final_position (clamped) = 0.2795
2025-11-04 11:03:16.985 | INFO | CHARACTER_SCROLL = 0.28 (91.5-11.0)/(310-22)
2025-11-04 11:03:16.985 | INFO | 
Scroll.cal_position() 返回: 0.2795
2025-11-04 11:03:16.986 | INFO | 底部边界阈值 (edge_threshold): 0.05
2025-11-04 11:03:16.987 | INFO | 顶部边界阈值 (edge_threshold_top): 0.1
2025-11-04 11:03:16.987 | INFO | 顶部判断条件: position < 0.1
2025-11-04 11:03:16.987 | INFO | 底部判断条件: position > 0.95 (即 position > 0.95)
2025-11-04 11:03:16.988 | INFO | CHARACTER_SCROLL = 0.28 (91.5-11.0)/(310-22)
2025-11-04 11:03:16.989 | INFO | CHARACTER_SCROLL = 0.28 (91.5-11.0)/(310-22)
2025-11-04 11:03:16.989 | INFO | 
at_top() 结果: False
2025-11-04 11:03:16.990 | INFO |   当前 position = 0.2795
2025-11-04 11:03:16.990 | INFO |   0.2795 < 0.1? False
2025-11-04 11:03:16.990 | WARNING |   ✗ 顶部检测失败
2025-11-04 11:03:16.991 | WARNING |     虽然滚动条在视觉上已经到达顶部，
2025-11-04 11:03:16.991 | WARNING |     但计算的 position = 0.2795 不满足 < 0.1
2025-11-04 11:03:16.992 | WARNING |     差距: 0.1795
2025-11-04 11:03:16.992 | WARNING | 
  建议调整:
2025-11-04 11:03:16.993 | WARNING |     将 edge_threshold_top 从 0.1 调整到 0.300 或更大
2025-11-04 11:03:16.993 | INFO | 
at_bottom() 结果: False
2025-11-04 11:03:16.994 | INFO | 可视化图像已保存: debug_滚动条顶部边界3_visualization.png
2025-11-04 11:03:16.995 | INFO |   绿线: 匹配到的滑块像素行
2025-11-04 11:03:16.995 | INFO |   蓝线: 滑块中点
2025-11-04 11:03:16.996 | INFO |   黄线: 滑块上下边界
2025-11-04 11:03:16.996 | INFO | 共测试 3 张图片:

2025-11-04 11:03:16.997 | INFO | ✗ 滚动条顶部边界:
2025-11-04 11:03:16.997 | INFO |     position = 0.3905
2025-11-04 11:03:16.998 | INFO |     at_top() = False
2025-11-04 11:03:16.998 | INFO |     滑块长度 = 68 像素
2025-11-04 11:03:16.998 | INFO |     第一个匹配行 = 95 像素

2025-11-04 11:03:16.999 | INFO | ✗ 滚动条顶部边界2:
2025-11-04 11:03:16.999 | INFO |     position = 0.3675
2025-11-04 11:03:17.000 | INFO |     at_top() = False
2025-11-04 11:03:17.000 | INFO |     滑块长度 = 61 像素
2025-11-04 11:03:17.001 | INFO |     第一个匹配行 = 92 像素

2025-11-04 11:03:17.001 | INFO | ✗ 滚动条顶部边界3:
2025-11-04 11:03:17.001 | INFO |     position = 0.2795
2025-11-04 11:03:17.002 | INFO |     at_top() = False
2025-11-04 11:03:17.002 | INFO |     滑块长度 = 22 像素
2025-11-04 11:03:17.003 | INFO |     第一个匹配行 = 81 像素

2025-11-04 11:03:17.003 | INFO | 顶部 position 值范围: 0.2795 ~ 0.3905
2025-11-04 11:03:17.004 | INFO | 平均值: 0.3458
2025-11-04 11:03:17.004 | INFO | 当前 edge_threshold_top: 0.1
2025-11-04 11:03:17.005 | WARNING | 
✗ 部分测试失败
2025-11-04 11:03:17.005 | WARNING | 建议将 edge_threshold_top 调整为: 0.410
2025-11-04 11:03:17.006 | WARNING | 
修改位置: module/ui/scroll.py 第 70 行
2025-11-04 11:03:17.006 | WARNING |   edge_threshold_top = 0.41
2025-11-04 11:06:20.084 | INFO | 使用 wiki 中的静态图片进行测试

2025-11-04 11:06:20.094 | INFO | 成功加载图片: wiki/滚动条顶部边界.png
2025-11-04 11:06:20.095 | INFO | 图片尺寸: 12x310 (宽x高)
2025-11-04 11:06:20.095 | INFO | 检测到滚动条区域图 (12x310)
2025-11-04 11:06:20.096 | INFO | 滚动条区域已保存: debug_滚动条顶部边界_scroll_area.png
2025-11-04 11:06:20.101 | INFO | 滚动条配置:
2025-11-04 11:06:20.102 | INFO |   区域 (area): (0, 0, 12, 310)
2025-11-04 11:06:20.102 | INFO |   目标颜色 (color): (102, 149, 224)
2025-11-04 11:06:20.103 | INFO |   轨道总长度 (total): 310 像素
2025-11-04 11:06:20.103 | INFO |   滑块长度 (length): 68 像素
2025-11-04 11:06:20.104 | INFO | 
颜色匹配结果:
2025-11-04 11:06:20.104 | INFO |   匹配的行数: 68 / 310
2025-11-04 11:06:20.105 | INFO |   匹配率: 21.9%
2025-11-04 11:06:20.106 | INFO |   匹配行索引范围: 95 ~ 162
2025-11-04 11:06:20.106 | INFO |   第一个匹配行距离顶部: 95 像素
2025-11-04 11:06:20.107 | INFO |   最后一个匹配行距离顶部: 162 像素
2025-11-04 11:06:20.107 | INFO |   匹配行中点: 128.50 像素
2025-11-04 11:06:20.108 | INFO | 位置计算公式:
2025-11-04 11:06:20.108 | INFO |   position = (middle - length/2) / (total - length)
2025-11-04 11:06:20.109 | INFO |   middle = 128.50
2025-11-04 11:06:20.109 | INFO |   length = 68
2025-11-04 11:06:20.110 | INFO |   length/2 = 34.00
2025-11-04 11:06:20.110 | INFO |   total = 310
2025-11-04 11:06:20.111 | INFO |   numerator = middle - length/2 = 128.50 - 34.00 = 94.50
2025-11-04 11:06:20.111 | INFO |   denominator = total - length = 310 - 68 = 242.00
2025-11-04 11:06:20.112 | INFO |   raw_position = 94.50 / 242.00 = 0.3905
2025-11-04 11:06:20.112 | INFO |   final_position (clamped) = 0.3905
2025-11-04 11:06:20.113 | INFO | CHARACTER_SCROLL = 0.39 (128.5-34.0)/(310-68)
2025-11-04 11:06:20.114 | INFO | 
Scroll.cal_position() 返回: 0.3905
2025-11-04 11:06:20.114 | INFO | 底部边界阈值 (edge_threshold): 0.05
2025-11-04 11:06:20.115 | INFO | 顶部边界阈值 (edge_threshold_top): 0.41
2025-11-04 11:06:20.115 | INFO | 顶部判断条件: position < 0.41
2025-11-04 11:06:20.116 | INFO | 底部判断条件: position > 0.95 (即 position > 0.95)
2025-11-04 11:06:20.116 | INFO | CHARACTER_SCROLL = 0.39 (128.5-34.0)/(310-68)
2025-11-04 11:06:20.117 | INFO | CHARACTER_SCROLL = 0.39 (128.5-34.0)/(310-68)
2025-11-04 11:06:20.117 | INFO | 
at_top() 结果: True
2025-11-04 11:06:20.118 | INFO |   当前 position = 0.3905
2025-11-04 11:06:20.118 | INFO |   0.3905 < 0.41? True
2025-11-04 11:06:20.119 | INFO |   ✓ 顶部检测成功
2025-11-04 11:06:20.119 | INFO | 
at_bottom() 结果: False
2025-11-04 11:06:20.122 | INFO | 可视化图像已保存: debug_滚动条顶部边界_visualization.png
2025-11-04 11:06:20.122 | INFO |   绿线: 匹配到的滑块像素行
2025-11-04 11:06:20.123 | INFO |   蓝线: 滑块中点
2025-11-04 11:06:20.123 | INFO |   黄线: 滑块上下边界
2025-11-04 11:06:20.124 | INFO | 成功加载图片: wiki/滚动条顶部边界2.png
2025-11-04 11:06:20.125 | INFO | 图片尺寸: 12x310 (宽x高)
2025-11-04 11:06:20.125 | INFO | 检测到滚动条区域图 (12x310)
2025-11-04 11:06:20.126 | INFO | 滚动条区域已保存: debug_滚动条顶部边界2_scroll_area.png
2025-11-04 11:06:20.127 | INFO | 滚动条配置:
2025-11-04 11:06:20.127 | INFO |   区域 (area): (0, 0, 12, 310)
2025-11-04 11:06:20.128 | INFO |   目标颜色 (color): (102, 149, 224)
2025-11-04 11:06:20.128 | INFO |   轨道总长度 (total): 310 像素
2025-11-04 11:06:20.129 | INFO |   滑块长度 (length): 61 像素
2025-11-04 11:06:20.129 | INFO | 
颜色匹配结果:
2025-11-04 11:06:20.129 | INFO |   匹配的行数: 61 / 310
2025-11-04 11:06:20.130 | INFO |   匹配率: 19.7%
2025-11-04 11:06:20.130 | INFO |   匹配行索引范围: 92 ~ 152
2025-11-04 11:06:20.131 | INFO |   第一个匹配行距离顶部: 92 像素
2025-11-04 11:06:20.131 | INFO |   最后一个匹配行距离顶部: 152 像素
2025-11-04 11:06:20.132 | INFO |   匹配行中点: 122.00 像素
2025-11-04 11:06:20.132 | INFO | 位置计算公式:
2025-11-04 11:06:20.133 | INFO |   position = (middle - length/2) / (total - length)
2025-11-04 11:06:20.133 | INFO |   middle = 122.00
2025-11-04 11:06:20.134 | INFO |   length = 61
2025-11-04 11:06:20.134 | INFO |   length/2 = 30.50
2025-11-04 11:06:20.135 | INFO |   total = 310
2025-11-04 11:06:20.135 | INFO |   numerator = middle - length/2 = 122.00 - 30.50 = 91.50
2025-11-04 11:06:20.136 | INFO |   denominator = total - length = 310 - 61 = 249.00
2025-11-04 11:06:20.136 | INFO |   raw_position = 91.50 / 249.00 = 0.3675
2025-11-04 11:06:20.137 | INFO |   final_position (clamped) = 0.3675
2025-11-04 11:06:20.137 | INFO | CHARACTER_SCROLL = 0.37 (122.0-30.5)/(310-61)
2025-11-04 11:06:20.138 | INFO | 
Scroll.cal_position() 返回: 0.3675
2025-11-04 11:06:20.138 | INFO | 底部边界阈值 (edge_threshold): 0.05
2025-11-04 11:06:20.139 | INFO | 顶部边界阈值 (edge_threshold_top): 0.41
2025-11-04 11:06:20.139 | INFO | 顶部判断条件: position < 0.41
2025-11-04 11:06:20.140 | INFO | 底部判断条件: position > 0.95 (即 position > 0.95)
2025-11-04 11:06:20.140 | INFO | CHARACTER_SCROLL = 0.37 (122.0-30.5)/(310-61)
2025-11-04 11:06:20.141 | INFO | CHARACTER_SCROLL = 0.37 (122.0-30.5)/(310-61)
2025-11-04 11:06:20.142 | INFO | 
at_top() 结果: True
2025-11-04 11:06:20.142 | INFO |   当前 position = 0.3675
2025-11-04 11:06:20.142 | INFO |   0.3675 < 0.41? True
2025-11-04 11:06:20.143 | INFO |   ✓ 顶部检测成功
2025-11-04 11:06:20.143 | INFO | 
at_bottom() 结果: False
2025-11-04 11:06:20.144 | INFO | 可视化图像已保存: debug_滚动条顶部边界2_visualization.png
2025-11-04 11:06:20.145 | INFO |   绿线: 匹配到的滑块像素行
2025-11-04 11:06:20.145 | INFO |   蓝线: 滑块中点
2025-11-04 11:06:20.146 | INFO |   黄线: 滑块上下边界
2025-11-04 11:06:20.146 | INFO | 成功加载图片: wiki/滚动条顶部边界3.png
2025-11-04 11:06:20.147 | INFO | 图片尺寸: 12x310 (宽x高)
2025-11-04 11:06:20.147 | INFO | 检测到滚动条区域图 (12x310)
2025-11-04 11:06:20.148 | INFO | 滚动条区域已保存: debug_滚动条顶部边界3_scroll_area.png
2025-11-04 11:06:20.149 | INFO | 滚动条配置:
2025-11-04 11:06:20.149 | INFO |   区域 (area): (0, 0, 12, 310)
2025-11-04 11:06:20.150 | INFO |   目标颜色 (color): (102, 149, 224)
2025-11-04 11:06:20.151 | INFO |   轨道总长度 (total): 310 像素
2025-11-04 11:06:20.151 | INFO |   滑块长度 (length): 22 像素
2025-11-04 11:06:20.152 | INFO | 
颜色匹配结果:
2025-11-04 11:06:20.152 | INFO |   匹配的行数: 22 / 310
2025-11-04 11:06:20.152 | INFO |   匹配率: 7.1%
2025-11-04 11:06:20.153 | INFO |   匹配行索引范围: 81 ~ 102
2025-11-04 11:06:20.153 | INFO |   第一个匹配行距离顶部: 81 像素
2025-11-04 11:06:20.154 | INFO |   最后一个匹配行距离顶部: 102 像素
2025-11-04 11:06:20.154 | INFO |   匹配行中点: 91.50 像素
2025-11-04 11:06:20.155 | INFO | 位置计算公式:
2025-11-04 11:06:20.155 | INFO |   position = (middle - length/2) / (total - length)
2025-11-04 11:06:20.156 | INFO |   middle = 91.50
2025-11-04 11:06:20.156 | INFO |   length = 22
2025-11-04 11:06:20.157 | INFO |   length/2 = 11.00
2025-11-04 11:06:20.157 | INFO |   total = 310
2025-11-04 11:06:20.158 | INFO |   numerator = middle - length/2 = 91.50 - 11.00 = 80.50
2025-11-04 11:06:20.158 | INFO |   denominator = total - length = 310 - 22 = 288.00
2025-11-04 11:06:20.159 | INFO |   raw_position = 80.50 / 288.00 = 0.2795
2025-11-04 11:06:20.159 | INFO |   final_position (clamped) = 0.2795
2025-11-04 11:06:20.160 | INFO | CHARACTER_SCROLL = 0.28 (91.5-11.0)/(310-22)
2025-11-04 11:06:20.160 | INFO | 
Scroll.cal_position() 返回: 0.2795
2025-11-04 11:06:20.161 | INFO | 底部边界阈值 (edge_threshold): 0.05
2025-11-04 11:06:20.161 | INFO | 顶部边界阈值 (edge_threshold_top): 0.41
2025-11-04 11:06:20.162 | INFO | 顶部判断条件: position < 0.41
2025-11-04 11:06:20.162 | INFO | 底部判断条件: position > 0.95 (即 position > 0.95)
2025-11-04 11:06:20.163 | INFO | CHARACTER_SCROLL = 0.28 (91.5-11.0)/(310-22)
2025-11-04 11:06:20.163 | INFO | CHARACTER_SCROLL = 0.28 (91.5-11.0)/(310-22)
2025-11-04 11:06:20.164 | INFO | 
at_top() 结果: True
2025-11-04 11:06:20.164 | INFO |   当前 position = 0.2795
2025-11-04 11:06:20.165 | INFO |   0.2795 < 0.41? True
2025-11-04 11:06:20.165 | INFO |   ✓ 顶部检测成功
2025-11-04 11:06:20.166 | INFO | 
at_bottom() 结果: False
2025-11-04 11:06:20.167 | INFO | 可视化图像已保存: debug_滚动条顶部边界3_visualization.png
2025-11-04 11:06:20.167 | INFO |   绿线: 匹配到的滑块像素行
2025-11-04 11:06:20.168 | INFO |   蓝线: 滑块中点
2025-11-04 11:06:20.168 | INFO |   黄线: 滑块上下边界
2025-11-04 11:06:20.169 | INFO | 共测试 3 张图片:

2025-11-04 11:06:20.169 | INFO | ✓ 滚动条顶部边界:
2025-11-04 11:06:20.170 | INFO |     position = 0.3905
2025-11-04 11:06:20.170 | INFO |     at_top() = True
2025-11-04 11:06:20.170 | INFO |     滑块长度 = 68 像素
2025-11-04 11:06:20.171 | INFO |     第一个匹配行 = 95 像素

2025-11-04 11:06:20.171 | INFO | ✓ 滚动条顶部边界2:
2025-11-04 11:06:20.172 | INFO |     position = 0.3675
2025-11-04 11:06:20.172 | INFO |     at_top() = True
2025-11-04 11:06:20.173 | INFO |     滑块长度 = 61 像素
2025-11-04 11:06:20.173 | INFO |     第一个匹配行 = 92 像素

2025-11-04 11:06:20.174 | INFO | ✓ 滚动条顶部边界3:
2025-11-04 11:06:20.174 | INFO |     position = 0.2795
2025-11-04 11:06:20.174 | INFO |     at_top() = True
2025-11-04 11:06:20.175 | INFO |     滑块长度 = 22 像素
2025-11-04 11:06:20.175 | INFO |     第一个匹配行 = 81 像素

2025-11-04 11:06:20.176 | INFO | 顶部 position 值范围: 0.2795 ~ 0.3905
2025-11-04 11:06:20.176 | INFO | 平均值: 0.3458
2025-11-04 11:06:20.177 | INFO | 当前 edge_threshold_top: 0.41
2025-11-04 11:06:20.177 | INFO | 
✓ 所有测试通过！当前阈值 0.41 合适
