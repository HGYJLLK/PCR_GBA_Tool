# 5.1 logger

本文介绍 PCR_GBA_Tool 的日志系统，基于 Python `logging` 和 `rich` 库，提供美化的控制台输出和文件记录

代码位于：`module/logger.py`

---

## 日志格式

```bash
日志格式: %(asctime)s.%(msecs)03d | %(levelname)s | %(message)s
时间格式: %Y-%m-%d %H:%M:%S
```

例子：2024-01-01 08:35:59.460 | INFO | 开始执行任务

日志会打印在控制台，也会写入文件 `./logs/{date}_pcr.log`

---

## 关于日志

日志需要人工阅读，为了可读性，请避免大量使用 `logger.hr()`、`logger.warning()`、感叹号等强调字符

强调是相对的概念，我们之所以看到某个事物被强调了，并不是因为它本身被强调了，而是因为存在大量其他事物没有被强调。如果你强调了所有的事物，那么相当于你没有强调任何一个事物

---

## logger.hr(title, level=0)

用于分隔日志块，表示不同层级的开始。支持 4 个级别

### logger.hr(title, level=0)

仅在**脚本启动**时使用

```
2024-01-01 00:00:00.000 | INFO | ══════════════════════════════════════════════
2024-01-01 00:00:00.000 | INFO |                     TITLE
2024-01-01 00:00:00.000 | INFO | ══════════════════════════════════════════════
```

### logger.hr(title, level=1)

表示开始执行某个**任务/功能**

```
2024-01-01 00:00:00.000 | INFO | ==================== TITLE ====================
```

### logger.hr(title, level=2)

表示任务的某个**阶段**开始，如开始第一场战斗

```
2024-01-01 00:00:00.000 | INFO | -------------------- TITLE --------------------
```

### logger.hr(title, level=3)

表示某个**细分步骤**的开始

```
2024-01-01 00:00:00.000 | INFO | <<< TITLE >>>
```

---

## logger.attr(name, text)

打印键值对属性

```python
logger.attr("device_serial", "127.0.0.1:16384")
```

```bash
2024-01-01 00:00:00.000 | INFO | device_serial = 127.0.0.1:16384
```

## logger.attr_align(name, text, front='', align=22)

对齐的属性显示，适合打印配置信息

```python
logger.attr_align("Host", "127.0.0.1")
logger.attr_align("Port", "16384")
```

```bash
2024-01-01 00:00:00.000 | INFO |                   Host: 127.0.0.1
2024-01-01 00:00:00.000 | INFO |                   Port: 16384
```

---
