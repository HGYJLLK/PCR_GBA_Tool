# 日志系统

本文档介绍 PCR_GBA_Tool 的日志系统。

## 概述

日志系统基于 Python `logging` 模块和 `rich` 库，提供美化的控制台输出和文件记录。

## 基本使用

```python
from module.logger import logger

logger.info("普通信息")
logger.debug("调试信息")
logger.warning("警告信息")
logger.error("错误信息")
logger.critical("严重错误")
```

## 日志级别

| 级别 | 方法 | 用途 |
|------|------|------|
| DEBUG | `logger.debug()` | 调试信息，开发时使用 |
| INFO | `logger.info()` | 一般运行信息 |
| WARNING | `logger.warning()` | 警告，不影响运行 |
| ERROR | `logger.error()` | 错误，可能影响功能 |
| CRITICAL | `logger.critical()` | 严重错误，程序无法继续 |

## 特殊方法

### 分级标题 (hr)

```python
logger.hr("标题", level=0)  # 最高级，上下双线
logger.hr("标题", level=1)  # 双线
logger.hr("标题", level=2)  # 单线
logger.hr("标题", level=3)  # <<< 标记
```

输出效果：

```
══════════════════════════════════════════════
                    LEVEL 0
══════════════════════════════════════════════

════════════════ LEVEL 1 ═════════════════════

──────────────── LEVEL 2 ─────────────────────

<<< LEVEL 3 >>>
```

### 配置显示 (conf)

```python
logger.conf("Config", "cwj.json")
logger.conf("Version", "1.0.0")
```

输出：
```
[Config] cwj.json
[Version] 1.0.0
```

### 对齐配置 (conf_align)

```python
logger.conf_align("Host", "127.0.0.1")
logger.conf_align("Port", "16384")
```

输出：
```
                  Host: 127.0.0.1
                  Port: 16384
```

### 属性显示 (attr)

```python
logger.attr("device_serial", "127.0.0.1:16384")
logger.attr("screenshot_method", "DroidCast_raw")
```

输出：
```
device_serial = 127.0.0.1:16384
screenshot_method = DroidCast_raw
```

### 分隔线 (rule)

```python
logger.rule("Section")
logger.rule()  # 无标题
```

输出：
```
────────────── Section ───────────────
──────────────────────────────────────
```

## 自动高亮

日志系统会自动高亮特定内容：

| 内容类型 | 颜色 |
|----------|------|
| `True` | 绿色斜体 |
| `False` | 红色斜体 |
| `None` | 洋红斜体 |
| 文件路径 | 洋红色 |
| 时间格式 | 青色 |
| 括号 `{}[]()` | 粗体 |

## 日志文件

日志自动保存到 `./logs/` 目录：

```
logs/
├── 2024-01-01_pcr.log
├── 2024-01-02_pcr.log
└── ...
```

文件名格式：`{日期}_{日志器名称}.log`

## 异常处理

错误方法会自动格式化异常：

```python
try:
    raise ValueError("参数错误")
except Exception as e:
    logger.error(e)
# 输出: ValueError: 参数错误
```

使用 `exception()` 记录完整堆栈：

```python
try:
    raise ValueError("参数错误")
except Exception as e:
    logger.exception(e)
# 输出包含完整的堆栈追踪
```

## 配置示例

### 修改日志级别

```python
import logging
from module.logger import logger

# 只显示 WARNING 及以上
logger.logger.setLevel(logging.WARNING)

# 显示所有级别
logger.logger.setLevel(logging.DEBUG)
```

### 自定义日志器

```python
from module.logger import Logger

# 创建新的日志器
my_logger = Logger("my_module")
my_logger.info("自定义模块的日志")
```
