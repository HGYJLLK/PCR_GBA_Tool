# DEV_LOG.md

**AI 的"草稿纸"和"脑图"** - 记录工作进展、尝试的方案、遇到的问题和解决方案。

## 📝 使用规范

**本文件的性质**:
- 这是 AI 的**实时工作记录**，不是最终文档
- 记录**过程**，不仅是结果
- 防止 AI 上下文清空后重复踩坑

**何时写入**:
- ✅ 开始一个新任务时（记录任务目标和初步计划）
- ✅ 尝试一个方案时（记录方案内容）
- ✅ 遇到错误/卡点时（记录错误信息和分析）
- ✅ 方案失败时（记录失败原因）
- ✅ 方案成功时（记录成功方案和关键决策）
- ✅ 完成任务时（记录完成状态和后续建议）
- ✅ 需要人类介入时（记录请求原因和当前状态）

**记录格式**:
```markdown
## YYYY-MM-DD

### [HH:MM] 任务标题（来自 TODO.md）

**目标**: 简短描述要做什么

**方案 A**: 尝试 XXX
- 结果: ❌ 失败
- 原因: YYY
- 错误信息: `ZZZ`

**方案 B**: 改为 XXX
- 结果: ⚠️ 部分成功
- 问题: YYY
- 临时解决: ZZZ

**方案 C**: 最终采用 XXX
- 结果: ✅ 成功
- 关键决策: YYY
- 性能: ZZZ

**完成状态**: ✅ 已完成 / ⚠️ 部分完成 / ❌ 失败

**后续建议**: XXX
```

**AI 的职责**:
1. **实时记录**: 每次尝试方案都记录，不要等"完成了才写"
2. **诚实记录**: 失败的方案也要记录，避免重复尝试
3. **保留细节**: 错误信息、调试思路、关键参数都要记录
4. **交接上下文**: 如果任务中断，记录当前进度和下一步计划

**人类的职责**:
- 定期查看日志，了解 AI 工作状态
- 如果 AI 陷入死循环（重复尝试失败方案），及时介入
- 根据日志判断是否需要调整任务方向

**与其他文件的关系**:
| 文件 | 写入频率 | 内容性质 | 读者 |
|------|----------|----------|------|
| **DEV_LOG.md** | 每次尝试（高频） | 过程、失败、调试 | AI（防止重复）+ 人类（监控进度） |
| **TODO.md** | 任务完成时 | 任务状态（待办/完成） | AI（任务队列）+ 人类（维护需求） |
| **CONTEXT.md** | 重大变更时（低频） | 架构、技术栈 | AI（理解项目）+ 新开发者（快速上手） |

---

## 2025-02-09

### 创建 Agentic Workflow 工作流文件

**完成内容：**
- ✅ 创建 SKILL.md - 定义项目标准技能和最佳实践
- ✅ 创建 TODO.md - 任务队列模板（由人类维护）
- ✅ 创建 DEV_LOG.md - 开发日志（由 AI 维护）

**说明：**
- SKILL.md 包含了图像识别、设备控制、Handler 开发等核心技能
- 每个技能都有详细的文档字符串和示例代码
- 添加了常见陷阱（antipattern）警示
- TODO.md 提供了丰富的任务模板示例，涵盖功能开发、Bug 修复、测试等场景

**当前状态：**
工作流框架搭建完成，等待 TODO.md 中的任务。

---

## 2026-02-10

### [当前时刻] 完善 Agentic Workflow 文档体系

**目标**: 根据用户要求,为 TODO.md、SKILL.md、CONTEXT.md、DEV_LOG.md 补充维护规范

**用户需求**:
1. TODO.md 应该是人与 AI 共同维护的任务队列
2. AI 需要审查任务是否明确,遇到模糊指令时拆解为具体子任务
3. AI 需要检查依赖,缺少配置时在 TODO 顶部添加高优任务
4. CONTEXT.md 缺少"何时维护"的说明
5. 只能使用 requirements.txt 中的库,需要新库时必须先更新并告知

**完成内容**:
- ✅ **CONTEXT.md**: 添加 "AI 维护规范" 章节
  - 明确何时更新（架构调整、关键模块变更、目录结构变化等）
  - 明确无需更新的场景（Bug 修复、参数调整等）
  - 添加更新原则和流程
  - 添加三个文件分工对照表
  - 添加 AI 工作流程 Mermaid 图

- ✅ **TODO.md**: 扩展 "AI 使用说明" 章节
  - 强调 "执行 + 维护" 双重职责
  - 添加任务审查步骤（明确 vs 模糊任务的处理）
  - 添加依赖检查步骤（缺少配置时的处理）
  - 添加 5 次失败强制停止规则
  - 添加 AI 主动维护 TODO 的场景对照表

- ✅ **DEV_LOG.md**: 添加 "使用规范" 章节
  - 明确本文件的性质（草稿纸/脑图）
  - 定义何时写入（开始任务、尝试方案、遇到错误等）
  - 提供标准记录格式
  - 明确 AI 和人类的职责
  - 添加与其他文件的关系对照表

- ✅ **SKILL.md**: 添加 "使用规范" 章节
  - 明确本文件的性质（工具箱）
  - 定义何时使用和更新
  - 说明 `[SKILL]` 标签的含义
  - 提供更新格式模板

**关键决策**:
1. **三个文件的定位**:
   - CONTEXT.md = 墓碑/里程碑（低频更新,记录确定的事实）
   - TODO.md = 任务队列（高频更新,记录待办和完成）
   - DEV_LOG.md = 草稿纸/脑图（高频更新,记录过程和失败）
   - SKILL.md = 工具箱（中频更新,记录标准操作）

2. **AI 的主动维护职责**:
   - 不仅执行任务,还要审查任务是否合理
   - 发现模糊指令时,主动拆解并请求确认
   - 发现缺少依赖时,主动添加高优任务
   - 失败 5 次后,主动请求人类介入

3. **人机协作模式**:
   - 人类负责：添加需求、审批变更、处理 AI 无法解决的问题
   - AI 负责：执行任务、记录过程、维护任务列表、更新文档

**完成状态**: ✅ 已完成

**后续建议**:
- 人类可以开始在 TODO.md 中添加具体任务
- AI 将按照新的工作流程执行任务
- 如果发现工作流程有不合理之处,可以继续调整

---

_后续 AI 工作记录将追加在此处_
